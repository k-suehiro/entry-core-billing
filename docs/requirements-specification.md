# Entry Core Billing システム 要件定義書

## 1. システム概要

### 1.1 システム名
Entry Core Billing - 伝票管理台帳

### 1.2 システム目的
製造業における売上伝票と仕入伝票の一元管理を行い、業務効率化と正確な売上・仕入管理を実現する。

### 1.3 対象業務
- 売上伝票の登録・管理
- 仕入伝票の登録・管理
- 得意先・仕入先マスター管理
- 製番・品名マスター管理
- 売上・仕入実績の集計・分析

### 1.4 システム利用者
- **営業担当者**: 売上伝票の登録・参照
- **購買担当者**: 仕入伝票の登録・参照
- **経理担当者**: 全伝票の参照・集計
- **管理者**: システム全体の管理・設定

---

## 2. 機能要件

### 2.1 売上伝票管理機能

#### 2.1.1 売上伝票一覧表示
- **機能概要**: 登録済み売上伝票の一覧表示
- **表示項目**: 請求番号、得意先名、請求日、明細数、合計金額、担当者、部門
- **検索機能**: 得意先名、製番による部分一致検索
- **フィルター機能**: 請求日による期間絞り込み
- **ソート機能**: 各カラムでの昇順・降順ソート
- **ページング**: 10件/20件/50件の表示件数選択
- **エクスポート**: CSV形式でのデータ出力

#### 2.1.2 売上伝票登録・編集
- **新規登録**: 売上伝票の新規作成
- **編集機能**: 既存伝票の修正
- **必須項目**: 得意先、請求日、担当者、明細情報
- **自動採番**: 請求番号の自動生成
- **税区分自動設定**: 得意先選択時の税区分自動反映
- **部門自動設定**: 担当者選択時の部門自動反映

#### 2.1.3 売上伝票明細管理
- **明細追加**: 複数明細の登録
- **明細編集**: 行単位での編集・保存
- **明細削除**: 削除確認付きの明細削除
- **金額自動計算**: 数量×単価の自動計算
- **JobPub連携**: 製番入力時の品名自動取得（8桁製番）

### 2.2 仕入伝票管理機能

#### 2.2.1 仕入伝票一覧表示
- **機能概要**: 登録済み仕入伝票の一覧表示
- **表示項目**: 仕入先名、日付、明細数、合計金額、担当者、部門
- **検索機能**: 仕入先名による部分一致検索
- **フィルター機能**: 日付による期間絞り込み
- **ソート機能**: 各カラムでの昇順・降順ソート
- **ページング**: 10件/20件/50件の表示件数選択
- **エクスポート**: CSV形式でのデータ出力

#### 2.2.2 仕入伝票登録・編集
- **新規登録**: 仕入伝票の新規作成
- **編集機能**: 既存伝票の修正
- **必須項目**: 発注番号、仕入先、納品書番号、日付、担当者、明細情報
- **発注番号検証**: 7桁数字の入力検証
- **部門自動設定**: 担当者選択時の部門自動反映

#### 2.2.3 仕入伝票明細管理
- **明細追加**: 複数明細の登録
- **明細編集**: 行単位での編集・保存
- **明細削除**: 削除確認付きの明細削除
- **作業コード選択**: 定義済み作業コードからの選択
- **金額自動計算**: 数量×単価の自動計算
- **CREPOS連携**: 発注番号入力時の明細自動取得（7桁発注番号）

### 2.3 マスター管理機能

#### 2.3.1 得意先マスター
- **得意先コード**: 一意識別子（C001形式）
- **得意先名**: 会社名・組織名
- **税区分**: 課税/不課税の設定

#### 2.3.2 仕入先マスター
- **仕入先コード**: 一意識別子（V001形式）
- **仕入先名**: 会社名・組織名

#### 2.3.3 製番マスター
- **製番**: 8桁英数字（TK25X999形式）
- **品名**: 製品・部品名称
- **得意先関連付け**: 製番と得意先の紐付け
- **仕入先関連付け**: 製番と仕入先の紐付け

#### 2.3.4 担当者・部門マスター
- **担当者名**: 従業員名
- **所属部門**: 東京事業所、浜松事業所等
- **部門階層**: 事業所単位での管理

### 2.4 集計・分析機能

#### 2.4.1 売上分析
- **月次推移グラフ**: 過去6ヶ月の売上推移
- **期間別集計**: 全期間/月別/年別の集計
- **得意先別ランキング**: 売上金額上位3社
- **統計情報**: 合計金額、平均金額、得意先数

#### 2.4.2 仕入分析
- **月次推移グラフ**: 過去6ヶ月の仕入推移
- **期間別集計**: 全期間/月別/年別の集計
- **仕入先別ランキング**: 仕入金額上位3社
- **統計情報**: 合計金額、平均金額、仕入先数

### 2.5 ユーザー管理機能

#### 2.5.1 ユーザープロフィール
- **プロフィール表示**: ユーザー情報の表示
- **プロフィール編集**: 基本情報の変更
- **パスワード変更**: セキュリティ設定
- **通知設定**: システム通知の設定

---

## 3. 非機能要件

### 3.1 性能要件
- **応答時間**: 画面表示3秒以内
- **同時接続数**: 最大50ユーザー
- **データ処理**: 10,000件の伝票データを5秒以内で表示
- **バックアップ**: 日次自動バックアップ

### 3.2 可用性要件
- **稼働率**: 99.5%以上（月間）
- **メンテナンス時間**: 月1回、2時間以内
- **障害復旧時間**: 4時間以内

### 3.3 セキュリティ要件
- **認証**: ユーザーID・パスワード認証
- **権限管理**: 役割ベースアクセス制御
- **データ暗号化**: 通信時のSSL/TLS暗号化
- **監査ログ**: 操作履歴の記録・保存

### 3.4 運用要件
- **バックアップ**: 日次フルバックアップ
- **ログ管理**: アクセスログ・エラーログの保存
- **監視**: システム稼働状況の24時間監視
- **保守**: 月次定期メンテナンス

### 3.5 互換性要件
- **ブラウザ**: Chrome、Firefox、Safari、Edge（最新版）
- **OS**: Windows 10以降、macOS 10.15以降
- **解像度**: 1280×720以上
- **モバイル**: タブレット端末対応

---

## 4. システム制約

### 4.1 技術制約
- **フロントエンド**: HTML + JavaScript + Tailwind CSS
- **バックエンド**: MySQL 8.0以降
- **Webサーバー**: Apache 2.4以降 または Nginx 1.18以降
- **外部連携**: JobPub API、CREPOS API

### 4.2 業務制約
- **製番形式**: TK25X999（8桁英数字、Iを除く）
- **発注番号形式**: 7桁数字
- **得意先コード**: C001形式
- **仕入先コード**: V001形式
- **作業コード**: 既定の作業分類に準拠

### 4.3 データ制約
- **伝票保存期間**: 7年間
- **最大明細数**: 1伝票あたり100明細
- **ファイルサイズ**: CSVエクスポート最大10MB
- **文字コード**: UTF-8

---

## 5. 外部システム連携

### 5.1 JobPub連携
- **連携方式**: REST API
- **連携タイミング**: 製番入力時（リアルタイム）
- **取得データ**: 品名、仕様情報
- **エラーハンドリング**: 接続エラー時の代替処理

### 5.2 CREPOS連携
- **連携方式**: REST API
- **連携タイミング**: 発注番号入力時（リアルタイム）
- **取得データ**: 明細情報、数量、単価
- **エラーハンドリング**: 接続エラー時の代替処理

---

## 6. 運用・保守要件

### 6.1 運用体制
- **システム管理者**: 1名（常駐）
- **業務管理者**: 各部門1名
- **エンドユーザー**: 最大50名
- **サポート体制**: 平日9:00-18:00

### 6.2 保守要件
- **定期メンテナンス**: 月1回（第3日曜日）
- **セキュリティパッチ**: 四半期ごと適用
- **機能改善**: 年2回のバージョンアップ
- **データ移行**: 年次システム更新時

### 6.3 教育・研修
- **初期研修**: 新規ユーザー向け2時間研修
- **定期研修**: 年1回の操作研修
- **マニュアル**: 操作マニュアル・FAQ整備
- **ヘルプデスク**: 問い合わせ対応体制

---

## 7. 移行要件

### 7.1 データ移行
- **既存データ**: 過去3年分の伝票データ移行
- **マスターデータ**: 得意先・仕入先・製番マスター移行
- **移行方式**: CSVファイル経由での一括移行
- **検証**: 移行データの整合性チェック

### 7.2 システム移行
- **移行方式**: 段階的移行（部門単位）
- **並行運用期間**: 1ヶ月間
- **切り替え**: 月初での本格運用開始
- **ロールバック**: 緊急時の旧システム復帰手順

---

## 8. 受入基準

### 8.1 機能テスト
- **単体テスト**: 全機能の正常動作確認
- **結合テスト**: システム間連携の動作確認
- **システムテスト**: 本番環境での総合テスト
- **ユーザー受入テスト**: エンドユーザーによる操作確認

### 8.2 性能テスト
- **負荷テスト**: 同時接続50ユーザーでの動作確認
- **ストレステスト**: 限界性能の確認
- **耐久テスト**: 長時間運用での安定性確認

### 8.3 セキュリティテスト
- **脆弱性診断**: セキュリティホールの確認
- **侵入テスト**: 不正アクセス対策の確認
- **データ保護**: 個人情報保護対策の確認

---

## 9. プロジェクト体制

### 9.1 プロジェクト組織
- **プロジェクトマネージャー**: 1名
- **システムエンジニア**: 2名
- **プログラマー**: 3名
- **テスター**: 2名
- **業務担当者**: 各部門1名

### 9.2 開発スケジュール
- **要件定義**: 1ヶ月
- **基本設計**: 1ヶ月
- **詳細設計**: 2ヶ月
- **開発・単体テスト**: 3ヶ月
- **結合・システムテスト**: 1ヶ月
- **ユーザー受入テスト**: 1ヶ月
- **本番移行**: 1ヶ月

### 9.3 成果物
- **設計書**: 要件定義書、基本設計書、詳細設計書
- **プログラム**: ソースコード、実行モジュール
- **テスト**: テスト仕様書、テスト結果報告書
- **運用**: 運用マニュアル、保守マニュアル
- **教育**: 操作マニュアル、研修資料

---

この要件定義書は、Entry Core Billingシステムの開発・運用における基本方針と詳細要件を定義したものです。システム開発の各フェーズにおいて、この要件定義書を基準として作業を進めることで、品質の高いシステムの構築を目指します。